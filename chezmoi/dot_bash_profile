#
# ~/.bash_profile
#

# Utility functions

exists() {
    test -x "$(command -v "$1")"
}

# Configure $EDITOR and $VISUAL
export EDITOR=nano
exists subl && EDITOR=subl || 
	{ exists vim && EDITOR=vim; } || 
	{ exists vi && EDITOR=vi; }

export VISUAL=subl

# If not running interactively, don't do anything
[[ $- != *i* ]] && return

# Setup vars for GPU
export XDG_SESSION_TYPE=wayland  
export XDG_CURRENT_DESKTOP=sway  
export GDK_BACKEND=wayland  
export GBM_BACKEND=nvidia-drm  
export __GLX_VENDOR_LIBRARY_NAME=nvidia  
export WLR_NO_HARDWARE_CURSORS=1  
export WLR_DRM_NO_ATOMIC=1  

# Setup application related ENV vars
export PAGER=less
export LESS='-R -M'
export LESSHISTFILE='-' # Disable the ~/.lesshst file
export GREP_COLORS='mt=38;5;196'
export SSH_AUTH_SOCK="${XDG_RUNTIME_DIR}/ssh-agent.socket"
export GTK_THEME='Breeze-Dark'

# Setup dev related ENV vars
export CC=clang
export CXX=clang

# Explicitly configure XDG vars just to have them
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_CACHE_HOME="$HOME/.cache"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_STATE_HOME="$HOME/.local/state"

# Configure non XDG compliant apps
# https://wiki.archlinux.org/title/XDG_Base_Directory#Support
export GNUPGHOME="$XDG_DATA_HOME/gnupg"
export INPUTRC="$XDG_CONFIG_HOME/readline/inputrc"
export BUNDLE_USER_CONFIG="$XDG_CONFIG_HOME/bundle"
export BUNDLE_USER_CACHE="$XDG_CACHE_HOME/bundle"
export BUNDLE_USER_PLUGIN="$XDG_DATA_HOME/bundle"
export _JAVA_OPTIONS=-Djava.util.prefs.userRoot="$XDG_CONFIG_HOME/java"

# Custom PATH
PATH="$HOME/.local/bin/:$PATH"
export PATH="$PATH:/home/george/.local/share/JetBrains/Toolbox/scripts"

# Place to put stuff local to a specific machine not worth sharing
if [ -r "$HOME/.bash_profile.local" ]; then
    . "$HOME/.bash_profile.local"
fi

[ "$BASH_VERSION" -a -z "$POSIXLY_CORRECT" ] && . "$HOME/.bashrc"
